{% extends 'base.html.twig' %}

{% set title = "Blender Collection"%}
{% set meta_description = "Bienvenue sur notre plateforme : découvrez nos services, connectez-vous ou créez un compte en toute simplicité." %}

{% block og_type %}website{% endblock %}
{# --- Directive SEO pour robots --- #}
{% block meta_robots %}noindex, nofollow{% endblock %}

{# --- A ajouter une fois le site terminé --- #}
{# {% block og_image %}/images/og-default.jpg{% endblock %} #} 
{# {% block twitter_image %}/images/twitter-default.jpg{% endblock %} #}

{% block body %}
{# {% set bg = 4 %} #}
    {% if bg == 1 %}
        <section class="w-full flex justify-center items-center relative bg-[url('/img/bg2.jpg')] md:bg-[length:100%] bg-cover bg-center bg-fixed">
    {% elseif bg == 2 %}
        <section class="w-full flex justify-center items-center relative bg-[url('/img/bg1.jpg')] lg:bg-[length:100%] bg-no-repeat bg-fixed">
    {% elseif bg == 3 %}
        <section class="w-full flex justify-center items-center relative bg-[url('/img/bg4.webp')] lg:bg-[length:100%] bg-no-repeat bg-fixed">
    {% elseif bg == 4 %}
        <section class="w-full flex justify-center items-center relative bg-[url('/img/bg5.webp')] bg-[length:100%] bg-center bg-fixed bg-no-repeat">
    {% endif %}
    
        <div class="absolute inset-0 bg-black bg-opacity-60 z-0"></div> {# Floutage / assombrissement #}

        <article id="hero" class="relative z-10 w-full max-w-5xl h-[350px] lg:h-[500px] flex flex-col justify-center px-6 md:px-12">
            <h1 class="font-bold text-4xl md:text-5xl lg:text-7xl text-white leading-tight drop-shadow-lg">
                Blender Add-on Collection
            </h1>
            <h2 class="text-lg md:text-xl lg:text-2xl mt-3 text-white font-medium drop-shadow">
                Find free and open source add-on collections.
            </h2>

            <div class="mt-6 flex flex-row flex-wrap gap-4">
                <a href="{{ path('create_collection') }}"
                class="bg-white text-black-950 rounded-lg px-8 py-3 flex items-center gap-2 shadow-md hover:shadow-xl transition hover:scale-[1.03] active:scale-100">
                    <svg width="26" height="31" viewBox="0 0 26 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2.55208 22.7917H23.3854V2.99999H4.63542C4.08288 2.99999 3.55298 3.21948 3.16228 3.61019C2.77158 4.00089 2.55208 4.53079 2.55208 5.08333V22.7917ZM4.63542 0.916656H24.4271C24.7034 0.916656 24.9683 1.0264 25.1637 1.22175C25.359 1.4171 25.4688 1.68206 25.4688 1.95832V23.8333C25.4688 24.1096 25.359 24.3746 25.1637 24.5699C24.9683 24.7653 24.7034 24.875 24.4271 24.875H1.51042L0.46875 26.7479V5.08333C0.46875 3.97826 0.907737 2.91845 1.68914 2.13705C2.47054 1.35564 3.53035 0.916656 4.63542 0.916656Z" fill="#1B1C1C"/>
                        <path d="M4.11458 24.875C3.70018 24.875 3.30275 25.0396 3.00973 25.3326C2.7167 25.6257 2.55208 26.0231 2.55208 26.4375C2.55208 26.8519 2.7167 27.2493 3.00973 27.5423C3.30275 27.8354 3.70018 28 4.11458 28H23.3854V24.875H4.11458ZM4.11458 22.7917H25.4688V28C25.4688 28.5525 25.2493 29.0824 24.8586 29.4731C24.4679 29.8638 23.938 30.0833 23.3854 30.0833H4.11458C3.14765 30.0833 2.22032 29.6992 1.53659 29.0155C0.852864 28.3318 0.46875 27.4044 0.46875 26.4375C0.46875 25.4706 0.852864 24.5432 1.53659 23.8595C2.22032 23.1758 3.14765 22.7917 4.11458 22.7917ZM8.80208 2.99999V11.1667L11.9271 8.66666L15.0521 11.1667V2.99999H8.80208ZM6.71875 0.916656H17.1354V13.3333C17.1351 13.5293 17.0796 13.7213 16.9751 13.8871C16.8706 14.053 16.7214 14.186 16.5447 14.2708C16.3681 14.3557 16.171 14.389 15.9762 14.3669C15.7815 14.3447 15.5969 14.2681 15.4438 14.1458L11.9271 11.3333L8.41042 14.1458C8.25725 14.2681 8.07268 14.3447 7.87792 14.3669C7.68316 14.389 7.48612 14.3557 7.30943 14.2708C7.13274 14.186 6.98358 14.053 6.8791 13.8871C6.77461 13.7213 6.71903 13.5293 6.71875 13.3333V0.916656Z" fill="#1B1C1C"/>
                    </svg>
                    <span class="text-lg font-medium">Create Yours</span>
                </a>

                <a href="{{ path('app_terms_service') }}"
                class="bg-purple-500 hover:bg-purple-600 active:bg-purple-700 text-white rounded-lg px-8 py-3 flex items-center gap-2 shadow-md hover:shadow-xl transition hover:scale-[1.03] active:scale-100">
                    <span class="text-lg font-medium">Learn More</span>
                </a>
            </div>
        </article>
    </section>

    <section class=" px-12 mt-4 flex flex-col gap-8 w-full xl:w-2/3 mb-8">
        <article class=" bg-white dark:bg-black-900 p-6 rounded-lg
        flex flex-col gap-4">
            <div class=" flex flex-row justify-between items-center ">
                <div class=" flex flex-row justify-center items-center gap-4">
                    <svg width="50" height="41" viewBox="0 0 50 41" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M46.7072 0.102085C47.0904 -0.00922515 47.4943 -0.0298402 47.8869 0.0418685C48.2795 0.113577 48.65 0.275644 48.9692 0.515251C49.2883 0.754858 49.5473 1.06543 49.7258 1.42242C49.9042 1.7794 49.9971 2.173 49.9972 2.57209L49.9947 16.8521C49.9939 17.3297 49.8602 17.7976 49.6088 18.2036C49.3573 18.6096 48.9979 18.9377 48.5707 19.1511C48.1435 19.3646 47.6653 19.4551 47.1897 19.4124C46.714 19.3698 46.2596 19.1957 45.8772 18.9096L41.7722 15.8221L31.3222 29.7421C30.7132 30.5522 29.8269 31.1093 28.8329 31.3067C27.8389 31.5041 26.8069 31.328 25.9347 30.8121L25.5597 30.5621L17.2172 24.2946L6.17216 39.0071C5.12216 40.4071 3.20966 40.7746 1.72966 39.9271L1.36966 39.6896C0.702314 39.1882 0.240713 38.4606 0.0713513 37.6433C-0.0980099 36.8259 0.0364932 35.9749 0.449656 35.2496L0.687156 34.8896L13.3797 17.9846C13.9883 17.1734 14.8751 16.6155 15.8699 16.418C16.8646 16.2206 17.8973 16.3974 18.7697 16.9146L19.1422 17.1646L27.4822 23.4296L36.2872 11.7046L32.1697 8.61209C31.8133 8.34328 31.5329 7.98643 31.356 7.57655C31.1791 7.16668 31.1118 6.71787 31.1607 6.27414C31.2096 5.83042 31.3731 5.40703 31.635 5.04553C31.8969 4.68402 32.2483 4.39681 32.6547 4.21208L32.9972 4.08709L46.7097 0.0995849L46.7072 0.102085Z" fill="currentColor"/>
                    </svg>
                    <h2 class=" text-3xl font-semibold">Trend</h2>
                </div>
                <a href="{{ path('app_collection') }}"
                class="font-semibold relative inline-block transition-colors text-purple-400 hover:text-purple-500 after:content-[''] after:absolute after:left-0 after:-bottom-0.5 after:h-0.5 after:w-0 after:bg-purple-500 after:transition-all after:duration-300 hover:after:w-full">
                    View all
                </a>
            </div>
            <div class=" flex flex-row items-center justify-center gap-4">
                {% for collection in collections|slice(0, 2) %}
                    <a href="{{ path('liste_show', { id: collection.id }) }}"
                    class="tilt-card transition-transform duration-500 ease-out hover:scale-[1.02] relative w-2/4 h-[200px] lg:h-[300px] rounded-lg overflow-hidden p-4 flex flex-col justify-end bg-cover bg-center"
                    style="background-image: url('/uploads/{{ collection.image }}');">
                        
                        <div class="absolute bottom-0 left-0 w-full h-32 z-10 pointer-events-none"
                            style="
                                backdrop-filter: blur(4px);
                                -webkit-backdrop-filter: blur(4px);
                                mask-image: linear-gradient(to top, black 80%, transparent);
                                -webkit-mask-image: linear-gradient(to top, black 80%, transparent);
                            ">
                        </div>

                        <div class="relative z-20 text-white">
                            <h3 class="text-3xl font-semibold">{{ collection.name }}</h3>
                            <div class="mt-2">
                                <p class="flex items-center gap-2 text-sm">
                                    by {{ collection.usser.name ?? 'Unknown' }} |
                                    <span>{{ collection.download ?? 0 }}</span>
                                    <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 9.4375V15.0625C1 15.5803 1.4797 16 2.07143 16H14.9286C15.5203 16 16 15.5803 16 15.0625V9.4375" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M8.5 1V12.25M8.5 12.25L12.7858 8.5M8.5 12.25L4.21436 8.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </p>
                                <p class="text-sm line-clamp-2">
                                    {{ collection.description|slice(0, 100) ~ (collection.description and collection.description|length > 100 ? '...' : '') }}
                                </p>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            </div>
            <div class="flex xl:flex-row flex-col justify-center items-center gap-4 mx-4 mt-8 mb-2">
                {% for chunk in collections|batch(2)|slice(1, 2) %}
                    <div class="flex flex-row gap-4 w-full lg:w-auto">
                        {% for collection in chunk %}
                            <a href="{{ path('liste_show', { id: collection.id }) }}"
                            class="group w-2/4 flex flex-col gap-2 items-start transition-transform duration-300 hover:scale-[1.015]">

                                <img class="h-[150px] w-[300px] rounded-xl border-2 border-white object-cover transition-transform duration-500 group-hover:scale-[1.02] group-hover:opacity-90"
                                    src="/uploads/{{ collection.image }}"
                                    alt="Image {{ collection.name }}">

                                <h3 class="text-xl font-bold relative w-fit dark:text-white text-black-950 transition-colors 
                                        after:content-[''] after:absolute after:left-0 after:-bottom-0.5 
                                        after:h-0.5 after:w-0 after:bg-purple-500 
                                        after:transition-all after:duration-300 
                                        group-hover:after:w-full group-hover:text-purple-400">
                                    {{ collection.name }}
                                </h3>

                                <p class="flex items-center gap-2 text-sm dark:text-white text-black-950">
                                    <span>by 
                                        <span class="text-blue-400 hover:underline hover:text-blue-300 transition-colors">
                                            {{ collection.usser.name ?? 'Unknown' }}
                                        </span>
                                    </span> |
                                    <span class="underline">{{ collection.download ?? 0 }}</span>
                                    <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 9.4375V15.0625C1 15.5803 1.4797 16 2.07143 16H14.9286C15.5203 16 16 15.5803 16 15.0625V9.4375"
                                            stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M8.50007 1V12.25M8.50007 12.25L12.7858 8.5M8.50007 12.25L4.21436 8.5"
                                            stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                </p>
                            </a>
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>
        </article>

        <hr class=" bg-white">

        <article>
            <div class="flex flex-row justify-between items-center">
                <div class="flex flex-col justify-center items-start gap-2">
                    <div class="flex flex-row gap-4">
                        <svg width="26" height="31" viewBox="0 0 26 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.55208 22.7917H23.3854V2.99999H4.63542C4.08288 2.99999 3.55298 3.21948 3.16228 3.61019C2.77158 4.00089 2.55208 4.53079 2.55208 5.08333V22.7917ZM4.63542 0.916656H24.4271C24.7034 0.916656 24.9683 1.0264 25.1637 1.22175C25.359 1.4171 25.4688 1.68206 25.4688 1.95832V23.8333C25.4688 24.1096 25.359 24.3746 25.1637 24.5699C24.9683 24.7653 24.7034 24.875 24.4271 24.875H1.51042L0.46875 26.7479V5.08333C0.46875 3.97826 0.907737 2.91845 1.68914 2.13705C2.47054 1.35564 3.53035 0.916656 4.63542 0.916656Z" fill="currentColor"/>
                            <path d="M4.11458 24.875C3.70018 24.875 3.30275 25.0396 3.00973 25.3326C2.7167 25.6257 2.55208 26.0231 2.55208 26.4375C2.55208 26.8519 2.7167 27.2493 3.00973 27.5423C3.30275 27.8354 3.70018 28 4.11458 28H23.3854V24.875H4.11458ZM4.11458 22.7917H25.4688V28C25.4688 28.5525 25.2493 29.0824 24.8586 29.4731C24.4679 29.8638 23.938 30.0833 23.3854 30.0833H4.11458C3.14765 30.0833 2.22032 29.6992 1.53659 29.0155C0.852864 28.3318 0.46875 27.4044 0.46875 26.4375C0.46875 25.4706 0.852864 24.5432 1.53659 23.8595C2.22032 23.1758 3.14765 22.7917 4.11458 22.7917ZM8.80208 2.99999V11.1667L11.9271 8.66666L15.0521 11.1667V2.99999H8.80208ZM6.71875 0.916656H17.1354V13.3333C17.1351 13.5293 17.0796 13.7213 16.9751 13.8871C16.8706 14.053 16.7214 14.186 16.5447 14.2708C16.3681 14.3557 16.171 14.389 15.9762 14.3669C15.7815 14.3447 15.5969 14.2681 15.4438 14.1458L11.9271 11.3333L8.41042 14.1458C8.25725 14.2681 8.07268 14.3447 7.87792 14.3669C7.68316 14.389 7.48612 14.3557 7.30943 14.2708C7.13274 14.186 6.98358 14.053 6.8791 13.8871C6.77461 13.7213 6.71903 13.5293 6.71875 13.3333V0.916656Z" fill="currentColor"/>
                        </svg>
                        <h2 class="text-3xl font-semibold">Collection</h2>
                    </div>
                    <p>Extend Blender capabilities with these add-ons collections by the community.</p>
                </div>
                <a href="{{ path('app_collection') }}"
                class="font-semibold relative inline-block transition-colors text-purple-400 hover:text-purple-500 after:content-[''] after:absolute after:left-0 after:-bottom-0.5 after:h-0.5 after:w-0 after:bg-purple-500 after:transition-all after:duration-300 hover:after:w-full">
                    View all
                </a>
            </div>
            <hr class="border-t-2 border-black-900 mt-2">
            <div class="flex flex-col mt-4 gap-8">
                    <div class="flex flex-row justify-center gap-8 flex-wrap">
                        {% for collection in collections|slice(0, 12) %}
                            {% if collection %}
                                <div class="rounded-2xl overflow-hidden border border-grey-700 dark:bg-grey-950 bg-white hover:border-white/30 hover:shadow-xl transition-all duration-300 dark:text-white text-black-950 flex flex-col w-[300px] h-[475px]">
                                    <a href="{{ path('liste_show', { id: collection.id }) }}"
                                    class="h-1/2 shrink-0 overflow-hidden group relative rounded-t-3xl">
                                        <img src="{{ asset('uploads/' ~ collection.image) }}"
                                            alt="Image {{ collection.name }}"
                                            class="object-cover w-full h-full border-b-2 border-white transform transition-transform duration-500 group-hover:scale-105 group-hover:opacity-80">
                                    </a>


                                    <div class="flex flex-col flex-grow px-4 pt-4 pb-2 justify-between">
                                        <div>
                                            <p class="uppercase text-xs text-grey-500">Collection</p>
                                            <a href="{{ path('liste_show', { id: collection.id }) }}"
                                            >
                                                <h3 class="text-xl font-bold mt-1 mb-2 truncate">
                                                    {{ collection.name }}
                                                </h3>
                                            </a>
                                            <p class="text-sm mb-4 line-clamp-3 text-grey-300">
                                                {{ collection.description|default('No description.') }}
                                            </p>
                                        </div>

                                        <div class="flex flex-row justify-between items-end mt-auto text-grey-500 mb-2">
                                            <a href="{{ path('app_profil_visiteur', { id: collection.usser.id }) }}"
                                            class="text-xs font-medium underline hover:text-white transition">
                                                {{ collection.usser.name|default('Unknown') }}
                                            </a>

                                            <p class="flex items-center gap-1 text-sm">
                                                <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M1 9.4375V15.0625C1 15.5803 1.4797 16 2.07143 16H14.9286C15.5203 16 16 15.5803 16 15.0625V9.4375"
                                                        stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
                                                    <path d="M8.50007 1V12.25M8.50007 12.25L12.7858 8.5M8.50007 12.25L4.21436 8.5"
                                                        stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg>
                                                <span class="underline">{{ collection.download ?? 0 }}</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
            </div>
        </article>
    </section>
{% include "partials/up-btn.html.twig" %}

<script type="module" data-reload>
    import initAddonScript from '{{ asset("js/asset/orIcon.js") }}';
    initAddonScript(25);
</script>

{% endblock %}
